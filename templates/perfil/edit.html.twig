{% extends 'base.html.twig' %}
{% block title %}Editar perfil | TalentoDev{% endblock %}

{% block body %}
<h2 class="mb-3">Editar perfil</h2>

{# Subida de avatar como form independiente para prototipo #}
{% include 'perfil/components/avatar_upload.html.twig' with {
    username: user.username,
    avatar_url: user.avatar_url
} %}

<form method="post" class="card p-4 shadow-sm mt-3">
    <div class="mb-3">
        <label for="nombre" class="form-label">Nombre completo</label>
        <input type="text" class="form-control" id="nombre" name="nombre" value="{{ user.nombre }}" required>
    </div>

    <div class="mb-3">
        <label for="descripcion" class="form-label">Sobre m√≠</label>
        <textarea id="descripcion" name="descripcion" rows="4" class="form-control">{{ user.descripcion }}</textarea>
    </div>

    {% include 'perfil/components/skills_form.html.twig' with {
        username: user.username,
        skills: user.skills
    } %}

    <div class="mb-3">
        <label class="form-label">Portfolio (links)</label>
        <input type="url" name="portfolio[]" class="form-control mb-2" placeholder="https://..." value="{{ user.portfolio[0] ?? '' }}">
        <input type="url" name="portfolio[]" class="form-control mb-2" placeholder="https://..." value="">
    </div>

    <div class="d-grid d-sm-flex gap-2">
        <button type="submit" class="btn btn-primary">Guardar cambios</button>
        <a href="{{ path('perfil_show', {'username': user.username}) }}" class="btn btn-outline-secondary">Cancelar</a>
    </div>
</form>
{% endblock %}
